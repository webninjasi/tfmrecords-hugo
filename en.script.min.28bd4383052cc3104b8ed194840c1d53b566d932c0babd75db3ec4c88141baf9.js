$(function(){if($(".date-convert").each(function(){$(this).text(moment.unix($(this).text()).format("LL"))}),$("#book-search-input").keypress(function(s){if(s.keyCode!=13)return!0;var t=$(this).val().trim(),e,n=parseInt(t.replace("@",''));return isNaN(n)?(e=t.toLowerCase().replace("#","-").replace("+","-"),t.indexOf("#")==-1&&(e+="-0000"),players.indexOf(e)!=-1?($("#book-search-results").text("Redirecting to player page..."),document.location.pathname="players/"+encodeURIComponent(e)+"/"):authors.indexOf(e)!=-1?($("#book-search-results").text("Redirecting to author page..."),document.location.pathname="authors/"+encodeURIComponent(e)+"/"):$("#book-search-results").text("Page not found!"),!1):maps.indexOf(n.toString())==-1?($("#book-search-results").text("Page not found!"),!1):($("#book-search-results").text("Redirecting to map page..."),document.location.pathname="maps/"+n,!1)}),$(".book-search-holder + input").keydown(function(){$(this).prev(".book-search-holder").hide()}),$(".book-search-holder + input").keyup(function(){$(this).val().length||$(this).prev(".book-search-holder").show()}),$(".book-search-holder").click(function(){$(this).next().focus()}),$(".map-img").on("error",function(){if(this.originalSrc)return;this.originalSrc=this.src,this.src="https://images-docs-opensocial.googleusercontent.com/gadgets/proxy?url="+encodeURIComponent(this.originalSrc)+"&container=docs&gadget=a&rewriteMime=image%2F*&refresh=86400",window.localStorage.setItem("useProxy",!0)}),$(".pagination-list").on("change",function(){var e=parseInt(this.value);isNaN(e)||(window.location=window.location.href.replace(/(categories\/[^/]+)(\/?|\/(page\/.+))$/,"$1/page/"+e))}),$(".menu-toggle").click(function(){var t=$(this),n,e,s,o;t.next(".menu-children").toggle(),t.hasClass("right")?(t.removeClass("right"),t.addClass("down"),n=!0):(t.removeClass("down"),t.addClass("right"),n=!1),window.localStorage&&(e=window.localStorage.getItem("toggles"),s=t.attr("id"),e?e=e.split(","):e=[],o=e.indexOf(s),o==-1?n&&e.push(s):n||e.splice(o,1),window.localStorage.setItem("toggles",e.join(",")))}),$(".completions-toggle").click(function(){var e=$(this);e.closest("tr").next(".player-completions").toggle(),e.hasClass("right")?(e.removeClass("right"),e.addClass("down")):(e.removeClass("down"),e.addClass("right"))}),window.localStorage){var e=window.localStorage.getItem("toggles"),t;e?e=e.split(","):e=[];for(t in e)$("#"+e[t]).click()}function n(){var e=$(this).is(":checked");e?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light")),$('.theme-switch input[type="checkbox"]').attr("checked",e)}function s(){const e=localStorage.getItem("theme")?localStorage.getItem("theme"):null;e&&(document.documentElement.setAttribute("data-theme",e),e==="dark"?$('.theme-switch input[type="checkbox"]').attr("checked",!0):$('.theme-switch input[type="checkbox"]').attr("checked",!1))}$('.theme-switch input[type="checkbox"]').change(n),s()})