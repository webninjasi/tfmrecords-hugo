<!-- 
  Partial to generate page name from Title or File name.
  Accepts Page as context
-->
{{ $title := "" }}

{{ if .Title }}
  {{ $title = .Title }}
  {{ $name := (replace (lower .Title) "/" "-") }}

  {{ with $cat := index $.Site.Data.categories $name }}
    {{ $title = $cat.fullTitle }}
  {{ end }}

  {{ with $author := index $.Site.Data.authors $name }}
    {{ $title = $author.name }}
  {{ end }}

{{ else if and .IsSection .File }}
  {{ $title = path.Base .File.Dir | humanize | title }}
{{ else if and .IsPage .File }}
  {{ if and .Params .Params.categories }}
    {{ $title = printf "@%s" .File.BaseFileName }}
  {{ else if and .Params .Params.name }}
    {{ $title = .Params.name }}
  {{ else }}
    {{ $title = .File.BaseFileName | humanize | title }}
  {{ end }}
{{ end }}

{{ return $title }}
