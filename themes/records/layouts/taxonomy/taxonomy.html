{{ define "main" }}
  {{ $name := (replace (lower .Title) "/" "-") }}
  {{ $cat := index $.Site.Data.categories $name }}
  {{ $author := index $.Site.Data.authors $name }}
  {{ if $cat }}
    <h1>
      <img class="category-icon" src="{{ $cat.icon }}" />
      {{ $cat.fullTitle }} <sup>{{ len .Pages }}</sup>
    </h1>
  {{ else }}
    {{ if eq .Data.Singular "author" }}

    {{ if $author }}
    <h1>{{ $author.name }} <sup>{{ len .Pages }}</sup></h1>
    {{ if $author.player }}
    <a href="/players/{{ $author.url }}/">Profile</a>
    <br />
    {{ end }}
    {{ else }}
    <h1>{{ .Title }} <sup>{{ len .Pages }}</sup></h1>
    {{ end }}

    {{ else }}

    <h1>{{ .Title }} <sup>{{ len .Pages }}</sup></h1>

    {{ end }}
  {{ end }}

  {{ if and $cat $cat.note }}
  <p class="map-notes">{{ $cat.note | safeHTML }}</p>
  {{ end }}
  
  {{ partial "docs/pagination" . }}

  <div class="maps-list">
    {{ range (.Paginate (sort .Pages "Params.mapid" "asc")).Pages }}
      {{ partial "small-map" (dict "ctx" . "cat" $cat "author" $author) }}
    {{ end }}
  </div>

  {{ partial "docs/pagination" . }}
{{ end }}

{{ define "toc" }}
  {{ partial "docs/taxonomy" . }}
{{ end }}
